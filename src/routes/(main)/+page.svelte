<script lang="ts">
    import Testimonial from "$lib/ui/components/testimonials/Testimonial.svelte";
    import Headline from "$lib/ui/components/headline/Headline.svelte";
    import IdealChoice from "$lib/ui/layouts/shop/landing/IdealChoice.svelte";
    import { browser } from "$app/environment";
    import { popups } from "$lib/ui/components/popup/index.svelte.js";
    import Ad from "$lib/ui/components/ad-call-now/AdCallNow.svelte";
    import { onMount } from "svelte";
    import PageTitle from "$lib/ui/layouts/shop/PageTitle.svelte";
    import Showcase from "$lib/ui/components/smack-now/Showcase.svelte";
    import Introduction from "$lib/ui/layouts/shop/landing/Introduction.svelte";
    import ClickerGame from "$lib/ui/components/clicker/ClickerGame.svelte";

    let { data } = $props();
    const { testimonials } = data

    onMount(() => {
        if (!browser) return
        setTimeout(() => {
            if (!popups.isComponentTypeShown(Ad)) {
                popups.add({ render: Ad, focus: true, position: "center" })
            }
        }, 1500)
    })
</script>

<div class="page">
    <Headline />
    <PageTitle>The #1 Kitchen Chopping Appliance!</PageTitle>

    <div class="introduction-grid">
        <Testimonial {...testimonials[0]} />
        <Introduction />
    </div>

    <IdealChoice />

    <div class="testimonial-grid">
        <Showcase />
        <Testimonial {...testimonials[2]} />
    </div>

    <div class="game-grid">
        <Testimonial {...testimonials[1]} />
        <ClickerGame/>
    </div>

    <!-- TODO: "Write your own testimonial" link -->
    <!-- TODO: "View the commercial" link? -->
</div>

<style>
    :root {
        --page-gap: 1rem;
    }

    .page {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        padding-inline: 1rem;
    }

    .introduction-grid {
        width: 100%; height: 100%;
        display: grid;
        grid-template-rows: 1fr;
        grid-template-columns: minmax(0, 1fr) 3fr;
        gap: var(--page-gap);
    }

    .testimonial-grid {
        width: 100%; height: 100%;
        display: grid;
        grid-template-rows: 1fr;
        grid-template-columns: 2fr minmax(0, 1fr);
        gap: var(--page-gap);    
    }

    .game-grid {
        width: 100%; height: 100%;
        display: grid;
        grid-template-rows: 1fr;
        grid-template-columns: minmax(0, 1fr) 2fr;
        gap: var(--page-gap);    
    }

    @media screen and (max-width: 768px) {
        .introduction-grid {
            display: flex;
        flex-direction: column;
        flex-wrap: wrap;
        }
    }
</style>
